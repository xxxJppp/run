(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-260b9ee0","chunk-089a5e6c"],{1534:function(e,t,n){"use strict";var i=n("da37"),r=n.n(i);r.a},"1e01":function(e,t,n){var i=n("da0b"),r=n("ae6e").set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&i(o)&&r&&r(e,o),e}},"3a06":function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},"4a8d":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("section",{staticClass:"flexh flex-between",staticStyle:{"margin-top":"-.1rem"}},[n("div",{staticClass:"select-date flexh flex-align-center",on:{click:function(t){e.showDate=!0}}},[n("div",{staticClass:"MR10"},[n("span",[e._v("\n            "+e._s(e.queryInfo.startTime?e.queryInfo.startTime===e.queryInfo.endTime&&e.queryInfo.startTime==e.formData(e.today,"yyyy-MM-dd")?"今日":e.queryInfo.startTime:"全部日期")+"\n          ")]),e.queryInfo.startTime!==e.queryInfo.endTime?n("span",[n("br"),e._v(e._s(e.queryInfo.endTime))]):e._e()]),n("van-icon",{attrs:{name:"arrow-down"}})],1),e.codeId?n("div",{staticClass:"MT10 font-14 MR10"},[e._v("\n        总收款：\n        "),n("span",{staticClass:"fail-color"},[e._v("\n        "+e._s(e.totalAmount)+"\n        ")])]):e._e()]),n("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了",error:e.errorStatus,"error-text":"请求失败，点击重新加载"},on:{load:e.onLoad,"update:error":function(t){e.errorStatus=t}},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.orderList,(function(t,i){return n("div",{key:i,staticClass:"detail-info"},[n("div",{staticClass:"flexh flex-between"},[n("div",[n("div",{staticClass:"benefit",staticStyle:{color:"#4c4c4c"}},[e._v("订单号："+e._s(t.orderNo))]),t.qrCodeNick?n("div",{staticClass:"MT03"},[e._v("收款人：\n              "),n("span",{staticClass:"warn-tip"},[e._v(e._s(t.qrCodeNick))])]):e._e(),n("div",{staticClass:"MT03",staticStyle:{color:"#999"}},[e._v(e._s(e._f("timeData")(t.createTime.join("-"))))])]),n("div",{staticStyle:{"text-align":"right"}},[n("div",{staticClass:"font-20",staticStyle:{"font-weight":"bold"}},[e._v(e._s(t.amount))]),n("div",{staticClass:"MT03"},["ALIPAY"===t.outChannel?n("van-icon",{attrs:{name:"alipay",color:"#00a9f2",size:".23rem"}}):e._e(),"WXMQR"===t.outChannel?n("van-icon",{attrs:{name:"wechat",color:"#3cb034",size:".23rem"}}):e._e()],1),t.receivablesImg?n("div",{staticClass:"green font-13",on:{click:function(n){return e.uploadImg(t,i)}}},[e._v("查看收款凭证")]):n("div",{staticClass:"green font-13",on:{click:function(n){return e.uploadImg(t,i)}}},[e._v("上传收款凭证")])])])])})),0),n("van-dialog",{attrs:{"show-confirm-button":!!e.oneOrderInfo.receivablesImg,"show-cancel-button":""},on:{confirm:e.confirmUpload},model:{value:e.isUploadImg,callback:function(t){e.isUploadImg=t},expression:"isUploadImg"}},[n("div",{staticClass:"upload-img-tip"},[e._v("请上传收款凭证证明已确认收款，造成损失自己负责")]),e.oneOrderInfo.receivablesImg?n("img",{staticClass:"upload-img",attrs:{src:e.imageVoucherURL+e.oneOrderInfo.receivablesImg}}):e._e(),n("file-upload",{ref:"upload",staticClass:"input-file",attrs:{"put-action":e.host+"/api/v1/brush/uploadVoucher",accept:"image/*",name:"file",headers:{Authorization:e.token||""},data:{id:e.oneOrderInfo.id}},on:{"input-file":e.inputFile,"input-filter":e.inputFilter},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}},[e.oneOrderInfo.receivablesImg?e._e():n("div",{staticClass:"upload-img"},[n("van-icon",{attrs:{name:"plus"}})],1),n("div",{staticClass:"MB10",staticStyle:{color:"#288837"}},[e._v("上传收款截图")])])],1),n("van-popup",{style:{height:"100%",width:"100%"},attrs:{position:"right"},model:{value:e.showDate,callback:function(t){e.showDate=t},expression:"showDate"}},[n("dateSelect",{on:{goBack:e.goBack,confirmFn:e.confirmFn}})],1)],1)},r=[],o=(n("7cfd"),n("dea4")),a=(n("8f42"),n("0b34")),s=n.n(a),c=n("ca00"),d=n("9efd"),l=n("37b6"),u=n("5d2d"),f=function(){return n.e("chunk-5ea3ec15").then(n.bind(null,"64e2"))},p={data:function(){return{imageVoucherURL:l["c"],host:l["a"],orderList:[],loading:!1,finished:!1,errorStatus:!1,page:{index:1,size:10},isUploadImg:!1,files:[],proofImgUrl:"",token:u["a"].getSession("token")||"",oneOrderInfo:{},orderIndex:0,oldOrderList:[],queryInfo:{startTime:"",endTime:""},showDate:!1,today:new Date,codeId:0,totalAmount:0}},props:{activeTab:{type:Number}},filters:{timeData:c["c"]},components:{FileUpload:s.a,dateSelect:f},mounted:function(){this.codeId=Number(this.$route.query.codeId)},methods:{formData:c["a"],onLoad:function(){this.codeId?this.queryCodeDetail():this.queryMyOrderList()},queryCodeDetail:function(){var e=this;Object(d["A"])({codeId:this.codeId,startTime:this.queryInfo.startTime,endTime:this.queryInfo.endTime?this.queryInfo.endTime+" 23:59:59":""}).then((function(t){var n;(n=e.orderList).push.apply(n,Object(o["a"])(t.data.order)),e.totalAmount=t.data.totalAmount||0,e.loading=!1,e.finished=!0})).catch((function(t){e.$notify("".concat(t.message)),e.errorStatus=!0,e.loading=!1}))},queryMyOrderList:function(){var e=this;Object(d["D"])({orderState:3,_index:this.page.index,_size:this.page.size,startTime:this.queryInfo.startTime,endTime:this.queryInfo.endTime?this.queryInfo.endTime+" 23:59:59":""}).then((function(t){var n;(n=e.orderList).push.apply(n,Object(o["a"])(t.data.records)),e.loading=!1,e.page.index+=1,e.orderList.length>=Number(t.data.total)&&(e.finished=!0)})).catch((function(t){e.$notify("".concat(t.message)),e.errorStatus=!0,e.loading=!1}))},uploadImg:function(e,t){this.isUploadImg=!0,this.oneOrderInfo=e,this.orderIndex=t},inputFile:function(e,t){if(e&&t&&(e.active,t.active,e.progress,t.progress,e.error,t.error,e.success!==t.success)){var n=e.response;if(200===n.code){var i=n.data;this.proofImgUrl=i,this.oneOrderInfo.receivablesImg=i,this.orderList[this.orderIndex].receivablesImg=i}else this.$notify("图片上传失败："+JSON.stringify(n))}!e&&t&&t.success&&t.response.id,Boolean(e)===Boolean(t)&&t.error===e.error||this.$refs.upload.active||(this.$refs.upload.active=!0)},inputFilter:function(e,t,n){if(e&&!t&&!/\.(jpeg|jpe|jpg|gif|png|webp)$/i.test(e.name))return n();e.blob="";var i=window.URL||window.webkitURL;i&&i.createObjectURL&&(e.blob=i.createObjectURL(e.file))},confirmUpload:function(){this.$toast("确认成功")},goBack:function(){this.showDate=!1},confirmFn:function(e,t){this.queryInfo.startTime=e,this.queryInfo.endTime=t,this.page.index=1,this.orderList=[],this.showDate=!1,this.finished=!1,this.loading=!0,this.codeId?this.queryCodeDetail():this.queryMyOrderList()}}},h=p,m=(n("1534"),n("6691")),v=Object(m["a"])(h,i,r,!1,null,"1d533c12",null);t["default"]=v.exports},7130:function(e,t,n){var i=n("2498"),r=n("3038"),o=n("0cc1"),a=n("3a06"),s="["+a+"]",c="​",d=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),u=function(e,t,n){var r={},s=o((function(){return!!a[e]()||c[e]()!=c})),d=r[e]=s?t(f):a[e];n&&(r[n]=d),i(i.P+i.F*s,"String",r)},f=u.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(d,"")),2&t&&(e=e.replace(l,"")),e};e.exports=u},"8f42":function(e,t,n){"use strict";var i=n("3f8b"),r=n("549d"),o=n("6077"),a=n("1e01"),s=n("2ab1"),c=n("0cc1"),d=n("cb2e").f,l=n("e493").f,u=n("d3d8").f,f=n("7130").trim,p="Number",h=i[p],m=h,v=h.prototype,g=o(n("65c3")(v))==p,I="trim"in String.prototype,y=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=I?t.trim():f(t,3);var n,i,r,o=t.charCodeAt(0);if(43===o||45===o){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+t}for(var a,c=t.slice(2),d=0,l=c.length;d<l;d++)if(a=c.charCodeAt(d),a<48||a>r)return NaN;return parseInt(c,i)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(g?c((function(){v.valueOf.call(n)})):o(n)!=p)?a(new m(y(t)),n,h):y(t)};for(var b,_=n("f9a5")?d(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;_.length>w;w++)r(m,b=_[w])&&!r(h,b)&&u(h,b,l(m,b));h.prototype=v,v.constructor=h,n("a6d5")(i,p,h)}},ae6e:function(e,t,n){var i=n("da0b"),r=n("8cac"),o=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=n("e85e")(Function.call,n("e493").f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:o}},cb2e:function(e,t,n){var i=n("7afe"),r=n("d93f").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},da37:function(e,t,n){},dea4:function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){return i(e)||r(e)||o()}n.d(t,"a",(function(){return a}))},e493:function(e,t,n){var i=n("c864"),r=n("0614"),o=n("6117"),a=n("2ab1"),s=n("549d"),c=n("25ae"),d=Object.getOwnPropertyDescriptor;t.f=n("f9a5")?d:function(e,t){if(e=o(e),t=a(t,!0),c)try{return d(e,t)}catch(n){}if(s(e,t))return r(!i.f.call(e,t),e[t])}}}]);
//# sourceMappingURL=chunk-260b9ee0.1a81655c.js.map